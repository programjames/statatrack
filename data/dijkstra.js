var connections = {"100": ["101", "106", "105", "102"], "East Stairs (Basement)": ["East Stairs (Floor 1)", "092", "090"], "CSAIL (Floor 2)": ["West Stairs (Floor 2)", "North Elevator (Floor 2)", "North Stairs (Floor 2)", "West Elevator (Floor 2)"], "Center Stairs (Floor 1)": ["Center Stairs (Basement)", "East Lounge (Floor 1)"], "105": ["100"], "Dining Stairs": ["Dining Area (Floor 1)"], "Winding Stairs (Floor 1)": ["Winding Stairs (Floor 3)", "Child Care", "West Lobby (Floor 1)"], "124A": ["West Lounge (Floor 1)"], "East Exit": ["East Lobby (Floor 1)"], "107": ["108", "106"], "155": ["Dining Area (Floor 1)", "East Lounge (Floor 1)"], "East Lobby (Floor 1)": ["East Stairs (Floor 1)", "Northeast Stairs", "East Exit", "Dining Area (Floor 1)", "Bathrooms (Floor 1)"], "West Elevators (Floor 1)": ["West Elevators (Floor 3)", "West Lobby (Floor 1)", "West Elevators (Basement)"], "141": ["West Lounge (Floor 1)", "East Lounge (Floor 1)"], "106A": ["106", "109"], "East Stairs (Floor 1)": ["East Lobby (Floor 1)", "East Stairs (Basement)"], "West Exit": ["West Lobby (Floor 1)"], "West Lobby (Floor 3)": ["West Corridor (Floor 3)", "West Elevators (Floor 3)", "West Bridge (Floor 3)", "CSAIL (Floor 3)"], "103": ["101"], "Child Care": ["West Lounge (Floor 1)", "106", "Winding Stairs (Floor 1)"], "123": ["West Lounge (Floor 1)"], "Northeast Lobby (Floor 2)": ["Northeast Stairs"], "122": ["West Lounge (Floor 1)"], "Alumni Pool": ["South Exit"], "South Exit": ["Alumni Pool", "South Lobby (Floor 1)"], "102": ["100"], "West Stairs (Floor 1)": ["West Stairs (Floor 2)", "West Lobby (Floor 1)"], "Winding Stairs (Floor 3)": ["West Bridge (Floor 3)", "Winding Stairs (Floor 1)", "Central Lobby (Floor 3)"], "106": ["107", "109", "100", "106A", "Child Care"], "108": ["107"], "South Elevator (Floor 1)": ["South Lobby (Floor 1)", "South Elevator (Floor 3)"], "West Lounge (Floor 1)": ["122", "123", "123A", "141", "East Lounge (Floor 1)", "124A", "124", "Child Care", "South Lobby (Floor 1)"], "Bathrooms (Floor 1)": ["East Lobby (Floor 1)"], "109": ["106", "106A"], "North Lobby (Floor 1)": ["Dining Area (Floor 1)", "North Elevator (Floor 1)", "North Elevators (Floor 1)", "North Stairs (Floor 1)"], "East Lounge (Floor 1)": ["Center Elevators (Floor 1)", "Center Stairs (Floor 1)", "141", "West Lounge (Floor 1)", "Dining Area (Floor 1)", "155", "144"], "104A": ["101"], "124": ["West Lounge (Floor 1)"], "144": ["East Lounge (Floor 1)"], "South Lobby (Floor 1)": ["West Lounge (Floor 1)", "South Elevator (Floor 1)", "South Exit"], "101": ["104A", "100", "104", "101A", "103"], "101A": ["101"], "Northeast Stairs": ["Northeast Lobby (Floor 2)", "East Lobby (Floor 1)", "Dining Area (Floor 1)"], "Dining Area (Floor 1)": ["Northeast Stairs", "East Lobby (Floor 1)", "East Lounge (Floor 1)", "Dining Stairs", "North Lobby (Floor 1)", "155"], "123A": ["West Lounge (Floor 1)"], "104": ["101"], "West Elevator": ["West Elevator (Floor 2)", "West Lobby (Floor 1)"], "Center Stairs (Basement)": ["Center Elevators (Basement)", "Diagonal Corridor (Basement)", "Center Stairs (Floor 1)"], "Center Elevators (Basement)": ["Center Stairs (Basement)", "Diagonal Corridor (Basement)", "Center Elevators (Floor 1)"], "Center Elevators (Floor 1)": ["Center Elevators (Basement)", "East Lounge (Floor 1)"], "Z Corridor (Basement)": ["West Corridor (Basement)", "Diagonal Corridor (Basement)"], "Diagonal Corridor (Basement)": ["Elevator Ramp (Basement)", "081", "Center Elevators (Basement)", "Z Corridor (Basement)", "082", "Center Stairs (Basement)", "South Elevator (Basement)", "080", "South Corridor (Basement)"], "081": ["081Z", "Diagonal Corridor (Basement)"], "081Z": ["081"], "080": ["Diagonal Corridor (Basement)"], "082": ["Diagonal Corridor (Basement)"], "South Corridor (Basement)": ["085D", "West Corridor (Basement)", "085C", "085B", "Diagonal Corridor (Basement)", "South Elevator (Basement)", "085A", "090T", "East Corridor (Basement)", "087", "085"], "West Corridor (Basement)": ["South Corridor (Basement)", "Z Corridor (Basement)", "West Ramp (Basement)"], "West Ramp (Basement)": ["West Corridor (Basement)", "West Lobby (Basement)"], "West Lobby (Basement)": ["West Ramp (Basement)", "West Elevators (Basement)"], "West Elevators (Basement)": ["West Elevators (Floor 3)", "West Elevators (Floor 1)", "West Lobby (Basement)"], "085A": ["South Corridor (Basement)"], "085B": ["South Corridor (Basement)"], "085C": ["South Corridor (Basement)"], "085D": ["087A", "South Corridor (Basement)"], "085": ["South Corridor (Basement)"], "087A": ["085D"], "087B": ["087"], "087C": ["087"], "087D": ["087"], "087": ["087D", "087C", "South Corridor (Basement)", "087B"], "090": ["East Stairs (Basement)"], "090T": ["South Corridor (Basement)"], "092": ["East Corridor (Basement)", "East Stairs (Basement)"], "092A": ["East Corridor (Basement)"], "092B": ["East Corridor (Basement)"], "East Corridor (Basement)": ["092A", "096", "092", "South Corridor (Basement)", "092B"], "096": ["East Corridor (Basement)"], "North Elevator (Floor 1)": ["North Elevator (Floor 3)", "North Elevator (Floor 2)", "North Lobby (Floor 1)"], "North Elevators (Floor 1)": ["North Elevators (Floor 3)", "North Lobby (Floor 1)"], "North Elevator (Floor 2)": ["North Elevator (Floor 3)", "North Elevator (Floor 1)", "CSAIL (Floor 2)"], "North Elevator (Floor 3)": ["North Elevator (Floor 2)", "North Elevator (Floor 1)", "CSAIL (Floor 3)"], "North Elevators (Floor 3)": ["North Elevators (Floor 1)", "CSAIL (Floor 3)"], "West Corridor (Floor 3)": ["West Lobby (Floor 3)"], "West Elevators (Floor 3)": ["West Lobby (Floor 3)", "West Elevators (Floor 1)", "West Elevators (Basement)"], "West Bridge (Floor 3)": ["West Lobby (Floor 3)", "Winding Stairs (Floor 3)"], "West Lobby (Floor 1)": ["West Exit", "Winding Stairs (Floor 1)", "West Elevator", "West Stairs (Floor 1)", "West Elevators (Floor 1)"], "Central Lobby (Floor 3)": ["Winding Stairs (Floor 3)", "CSAIL (Floor 3)"], "CSAIL (Floor 3)": ["North Elevator (Floor 3)", "West Lobby (Floor 3)", "Central Lobby (Floor 3)", "North Elevators (Floor 3)"], "West Stairs (Floor 2)": ["CSAIL (Floor 2)", "West Stairs (Floor 1)"], "West Elevator (Floor 2)": ["West Elevator", "CSAIL (Floor 2)"], "North Stairs (Floor 2)": ["CSAIL (Floor 2)", "North Stairs (Floor 1)"], "North Stairs (Floor 1)": ["North Stairs (Floor 2)", "North Lobby (Floor 1)"], "South Elevator (Basement)": ["Elevator Ramp (Basement)", "South Corridor (Basement)", "Diagonal Corridor (Basement)", "South Elevator (Floor 3)"], "South Elevator (Floor 3)": ["South Elevator (Floor 1)", "South Elevator (Basement)"], "Elevator Ramp (Basement)": ["Diagonal Corridor (Basement)", "South Elevator (Basement)"]}
var locations = {"100": [530, 2122, 1], "CSAIL (Floor 2)": [2055, 800, 2], "Center Stairs (Floor 1)": [2188, 2069, 1], "105": [436, 2391, 1], "Dining Stairs": [3216, 1491, 1], "Winding Stairs (Floor 1)": [422, 1641, 1], "124A": [1100, 1644, 1], "East Exit": [3530, 2150, 1], "107": [219, 2236, 1], "155": [2588, 2266, 1], "East Lobby (Floor 1)": [3236, 2091, 1], "West Elevators (Floor 1)": [250, 1238, 1], "141": [1866, 2266, 1], "106A": [258, 2144, 1], "East Stairs (Floor 1)": [3416, 2305, 1], "West Exit": [305, 752, 1], "West Lobby (Floor 3)": [650, 1144, 3], "103": [716, 2461, 1], "Child Care": [483, 1980, 1], "123": [1044, 2527, 1], "Northeast Lobby (Floor 2)": [3677, 1127, 1], "122": [1008, 1736, 1], "Alumni Pool": [1633, 2988, 1], "South Exit": [1469, 3008, 1], "102": [616, 2227, 1], "West Stairs (Floor 1)": [500, 1155, 1], "Winding Stairs (Floor 3)": [1200, 1700, 3], "106": [341, 2125, 1], "108": [188, 2091, 1], "South Elevator (Floor 1)": [1413, 2822, 1], "West Lounge (Floor 1)": [1347, 1925, 1], "Bathrooms (Floor 1)": [3075, 2275, 1], "109": [313, 1927, 1], "North Lobby (Floor 1)": [2805, 1202, 1], "East Lounge (Floor 1)": [2155, 1855, 1], "104A": [577, 2450, 1], "124": [1394, 1652, 1], "144": [2044, 1602, 1], "South Lobby (Floor 1)": [1422, 2641, 1], "101": [633, 2288, 1], "101A": [702, 2258, 1], "Northeast Stairs": [3408, 1280, 1], "Dining Area (Floor 1)": [2786, 1827, 1], "123A": [1150, 2177, 1], "104": [513, 2411, 1], "West Elevator": [491, 1083, 1], "Center Stairs (Basement)": [2386, 2016, 0], "Center Elevators (Basement)": [2336, 2175, 0], "Center Elevators (Floor 1)": [2238, 2269, 1], "Z Corridor (Basement)": [1577, 1844, 0], "Diagonal Corridor (Basement)": [1811, 2430, 0], "081": [1663, 2336, 0], "081Z": [1180, 2308, 0], "080": [1747, 2713, 0], "082": [2144, 2555, 0], "South Corridor (Basement)": [2077, 2927, 0], "West Corridor (Basement)": [527, 2055, 0], "West Ramp (Basement)": [550, 1472, 0], "West Lobby (Basement)": [494, 1088, 0], "West Elevators (Basement)": [333, 1116, 0], "085A": [1888, 2850, 0], "085B": [2094, 2850, 0], "085C": [2330, 2827, 0], "085D": [2583, 2838, 0], "085": [2963, 2850, 0], "087A": [2583, 2747, 0], "087B": [2608, 2558, 0], "087C": [2838, 2405, 0], "087D": [2952, 2705, 0], "087": [2783, 2736, 0], "090": [3219, 2266, 0], "090T": [3258, 2727, 0], "092": [3372, 2241, 0], "092A": [3483, 2758, 0], "092B": [3413, 2744, 0], "East Corridor (Basement)": [3569, 2625, 0], "096": [3713, 2586, 0], "North Elevator (Floor 1)": [2844, 900, 1], "North Elevators (Floor 1)": [2869, 1016, 1], "North Elevator (Floor 2)": [3141, 800, 2], "North Elevator (Floor 3)": [3133, 802, 3], "North Elevators (Floor 3)": [3175, 905, 3], "West Corridor (Floor 3)": [319, 1002, 3], "West Elevators (Floor 3)": [544, 1125, 3], "West Bridge (Floor 3)": [769, 1716, 3], "West Lobby (Floor 1)": [366, 1194, 1], "Central Lobby (Floor 3)": [1336, 1647, 3], "CSAIL (Floor 3)": [2069, 1166, 3], "West Stairs (Floor 2)": [808, 1047, 2], "West Elevator (Floor 2)": [791, 975, 2], "North Stairs (Floor 2)": [2969, 916, 2], "North Stairs (Floor 1)": [2680, 1058, 1], "East Stairs (Basement)": [3500, 2291, 0], "South Elevator (Basement)": [1497, 2725, 0], "Elevator Ramp (Basement)": [1477, 2572, 0], "South Elevator (Floor 3)": [1702, 2716, 3]}

let start = "CSAIL (Floor 2)";
let end = "Winding Stairs (Floor 1)";

let visited = Object.fromEntries(Object.keys(locations).map(key => [key, false]));
let costs = Object.fromEntries(Object.keys(locations).map(key => [key, Infinity]));
let from = Object.fromEntries(Object.keys(locations).map(key => [key, null]));
costs[start] = 0;

function dist(loc1, loc2) {
    loc1 = Object.values(loc1)
    loc2 = Object.values(loc2)
    const d = Math.sqrt(Math.pow(loc1[0] - loc2[0], 2) + Math.pow(loc1[1] - loc2[1], 2));
    const f = (loc1[-1] != loc2[-1]);
    return d + 500 * f; // Moving floors costs 500
}

function reconstructPath(start, end) {
    const path = [end];
    while (end != start) {
        end = from[end];
        path.unshift(end);
    }
    return path;
}

while(!visited[end]) {
    i = -1;
    for(const loc in locations) {
        if(!visited[loc] && (i==-1 || costs[loc] < costs[i])) {
            i = loc;
        }
    }
    visited[i] = true;
    for(let neighbor in connections[i]) {
        neighbor = connections[i][neighbor]
        const d = costs[i] + dist(locations[i], locations[neighbor]);
        if(d < costs[neighbor]) {
            costs[neighbor] = d;
            from[neighbor] = i;
        }
    }
}

console.log(costs[end])
console.log(reconstructPath(start, end));